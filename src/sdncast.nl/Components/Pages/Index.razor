@using sdncast.nl.Models
@using sdncast.nl.Services
@using  Microsoft.Extensions.Options

@inject IShowsService _showsService
@inject IObjectMapper _mapper
@inject IOptions<AppSettings> _appSettings

@page "/"

<header>
    <div class="jumbotron">
        <div class="container">
            <NavMenu />
            <Jumbotron LiveShowEmbedUrl="https://www.youtube.com/embed/gsUNKO1y5xY" />
        </div>
    </div>
</header>
@functions{
    public bool ShowPreviousShows => previousShows.Count > 0;
    private bool showMoreShowsUrl;
    private string moreShowsUrl;
    private IList<Show> previousShows;
    protected override async Task OnInitAsync()
    {
        string playlist = _appSettings.Value.YouTubeCastPlaylistId;
        var showList = await _showsService.GetRecordedShowsAsync(null, false, playlist);

        previousShows = showList.PreviousShows;
        //_mapper.Map(showList, this);
    }
}

@if (ShowPreviousShows)
{
    <h2 class="col-md-12 text-center">Previous Recorded SDN Casts</h2>

    <div class="row">
        @foreach (var show in previousShows)
        {
            <Thumbnail Item="@show" />
        }
    </div>

    @if (showMoreShowsUrl)
    {
        <div class="row">
            <div class="col-md-12 text-center">
                <a href="@moreShowsUrl" class="btn btn-primary">More Recordings</a>
            </div>
        </div>
    }
}

@*@section FooterContent {
        <footer>
            <div class="row" style="background-color: #CAD971">
                <div class="col-md-4">
                </div>
                <div class="col-md-4">
                    <center>
                        &copy; @DateTime.Now.Year SDN. All rights reserved.
                    </center>
                </div>
                <div class="col-md-4">
                </div>
            </div>
        </footer>
    }*@


@*@section Scripts {
        <environment include="Development">
            <script src="https://apis.google.com/js/platform.js"></script>
            <script src="~/lib/jquery/dist/jquery.js"></script>
            <script src="~/lib/popper.js/dist/umd/popper.js"></script>
            <script src="~/lib/bootstrap/dist/js/bootstrap.js"></script>
        </environment>
        <environment exclude="Development">
            <script src="https://apis.google.com/js/platform.js"></script>
            <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"
                    asp-fallback-src="~/lib/jquery/dist/jquery.min.js"
                    asp-fallback-test="window.jQuery">
            </script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"
                    asp-fallback-src="~/lib/popper.js/dist/umd/popper.min.js"
                    asp-fallback-test="window.jQuery">
            </script>
            <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"
                    asp-fallback-src="~/lib/bootstrap/dist/js/bootstrap.min.js"
                    asp-fallback-test="window.jQuery && window.jQuery.fn && window.jQuery.fn.modal">
            </script>
        </environment>
    }*@
